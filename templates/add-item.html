{% extends "base.html" %}
    {% block content %}
        {% include "header.html" %}
        {% with messages = get_flashed_messages() %}
            {% if messages %}
              {% for message in messages %}
                  <p style="color: red" class="list-unstyled">{{message}}</p>
              {% endfor %}
            {% endif %}
        {% endwith %}
<div class="row">
    <br>
    <br>
    <br>
    <div class="col-xs-2 col-md-3"></div>
    <div class="col-xs-8 col-md-6">
        <h4>Add New Item</h4>
        <br>
        <form method="post">
            <label>Category</label>
            <br>
        	<select class="form-control selectCat" name="categoryId">
        		{% for x in categories %}
        			<option value="{{ x.id }}">{{ x.name}}</option>
        		{% endfor %}
        	</select>
            <br>
            <input style="display: none" class="form-control newCategory" placeholder="new category" name="newCategory" type="text">
        	<label>Name</label>
            <input class="form-control" name="name" type="text"></label>
            <br>
            <label>Description</label>
            <textarea class="form-control" name="description" type="text"></textarea>
            <br>
            <label>Price</label>
            <input class="form-control" name="price" type="text"><br>
            <label>Image url</label>
            <input class="form-control" name="image" type="text"><br>
            <label>sku</label>
            <input class="form-control" name="sku" type="text">
            <br>
            <br>
            <input class="btn btn-default" value="Add" type="submit">
        </form>
        <br>
        <a class="btn btn-default" href="/catalog/{{ category_name }}/items/{{ category_id }}">Cancel</a>
    </div>
    <div class="col-xs-2 col-md-3"></div>
</div>
<script>
$(document).ready(function() {
    $('.selectCat').append('<option value="* add new">* add new</option>')
    $('.selectCat').on('change', function() {
        if ($('.selectCat').val() == "* add new") {
            $('.newCategory').val('');
            $('.newCategory').show();
        } else {
            $('.newCategory').hide();
        }
        })
});
</script>
{% endblock %}
